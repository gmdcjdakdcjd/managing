<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <title>STOCK PROJECT</title>

    <!-- Bootstrap Theme CSS -->
    <link th:href="@{/css/styles.css}" rel="stylesheet"/>

    <style>
        .nav-ani {
            position: relative;
            font-weight: 500;
            padding: 0.5rem 0.8rem;
            transition: color 0.2s ease-in-out;
        }

        /* ê¸°ë³¸ ë°‘ì¤„ (ìˆ¨ê²¨ì ¸ ìˆìŒ) */
        .nav-ani::after {
            content: "";
            position: absolute;
            left: 0;
            bottom: -2px;
            width: 0%;
            height: 2px;
            background: #5a33ff;
            transition: width 0.25s ease-in-out;
        }

        /* Hover ì‹œ ë°‘ì¤„ ì• ë‹ˆë©”ì´ì…˜ */
        .nav-ani:hover::after {
            width: 100%;
        }

        /* Hover ê¸€ì ê°•ì¡° */
        .nav-ani:hover {
            color: #5a33ff !important;
        }

        /* Active ìƒíƒœ (í˜„ì¬ URL) */
        .nav-ani.active::after {
            width: 100%;
        }

        .nav-ani.active {
            color: #5a33ff !important;
            font-weight: 600;
        }

        html {
            overflow-y: scroll;
        }
    </style>

</head>

<body>

<!-- ğŸŒŸ ìƒë‹¨ Navbar -->
<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm py-2">
    <div class="container-fluid">

        <!-- ë¡œê³  -->
        <a class="navbar-brand fw-bold" href="/" style="font-size:1.25rem;">
            STOCK PROJECT
        </a>

        <!-- ëª¨ë°”ì¼ í† ê¸€ -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarMenu"
                aria-controls="navbarMenu" aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <!-- ë©”ë‰´ -->
        <div class="collapse navbar-collapse" id="navbarMenu">

            <!-- ê°€ìš´ë° ë©”ë‰´ -->
            <ul class="navbar-nav mx-auto align-items-center">

                <li class="nav-item"><a class="nav-link nav-ani" href="/board/indicator">ğŸ“‰ ì£¼ìš” ì§€ìˆ˜</a></li>
                <li class="nav-item"><a class="nav-link nav-ani" href="/board/bond">ğŸ¦ ì±„ê¶Œ</a></li>
                <li class="nav-item"><a class="nav-link nav-ani" href="/board/issue">ğŸ”¥ ì´ìŠˆ ì¢…ëª©</a></li>
                <li class="nav-item"><a class="nav-link nav-ani" href="/board/listKR">ğŸ‡°ğŸ‡· êµ­ì¥</a></li>
                <li class="nav-item"><a class="nav-link nav-ani" href="/board/listUS">ğŸ‡ºğŸ‡¸ ë¯¸êµ­ì¥</a></li>
                <li class="nav-item"><a class="nav-link nav-ani" href="/board/dualMomentumList">ğŸ“ˆ ìˆ˜ìµë¥  ìƒìœ„</a></li>
                <li class="nav-item"><a class="nav-link nav-ani" href="/board/stockInfo">ğŸ” ì¢…ëª©ê²€ìƒ‰</a></li>
                <li class="nav-item"><a class="nav-link nav-ani" href="/kodex/summary">ğŸ” ETFê²€ìƒ‰</a></li>
                <li class="nav-item" sec:authorize="isAuthenticated()">
                    <a class="nav-link nav-ani" href="/mystock/list">â­ ë‚˜ì˜ ê´€ì‹¬ ì¢…ëª©</a>
                </li>
                <li class="nav-item" sec:authorize="isAuthenticated()">
                    <a class="nav-link nav-ani" href="/myetf/list">â­ ë‚˜ì˜ ETF ë¦¬ìŠ¤íŠ¸</a>
                </li>
                <li class="nav-item" sec:authorize="hasRole('ADMIN')">
                    <a class="nav-link nav-ani" href="/manage/batch/history">ğŸ›  ê´€ë¦¬ì</a>
                </li>
            </ul>

            <!-- ì˜¤ë¥¸ìª½ ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ -->
            <ul class="navbar-nav ms-3 align-items-center">


                <!-- ë¡œê·¸ì¸ ì•ˆ ëœ ìƒíƒœ -->
                <li class="nav-item" sec:authorize="isAnonymous()">
                    <a class="nav-link nav-ani" th:href="@{/member/join}">íšŒì›ê°€ì…</a>
                </li>
                <li class="nav-item" sec:authorize="isAnonymous()">
                    <a class="nav-link nav-ani" th:href="@{/member/login}">ë¡œê·¸ì¸</a>
                </li>

                <!-- ë¡œê·¸ì¸ ëœ ìƒíƒœ -->
                <li class="nav-item d-flex align-items-center" sec:authorize="isAuthenticated()">
                    <span class="me-2">ğŸ‘¤ <span sec:authentication="principal.mid"></span></span>
                </li>

                <li class="nav-item" sec:authorize="isAuthenticated()">
                    <form th:action="@{/logout}" method="post" class="d-inline">
                        <button type="submit" class="nav-link btn btn-link p-0 nav-ani">
                            ë¡œê·¸ì•„ì›ƒ
                        </button>
                    </form>
                </li>


            </ul>

        </div>
    </div>
</nav>


<!-- ğŸŒŸ í˜ì´ì§€ ì»¨í…ì¸  (footer ë°€ì–´ì£¼ëŠ” ì˜ì—­) -->
<div id="page-content-wrapper" class="container-fluid px-4 py-3">
    <div layout:fragment="content"></div>
</div>

<!-- Footer -->
<footer class="mt-auto border-top py-3 bg-light text-center small text-muted">
    <div th:replace="layout/footer :: footerFragment"></div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"></script>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const current = window.location.pathname;
        document.querySelectorAll(".nav-ani").forEach(a => {
            if (a.getAttribute("href") && current.startsWith(a.getAttribute("href"))) {
                a.classList.add("active");
            }
        });
    });
</script>


<th:block layout:fragment="script"></th:block>

</body>

<style>
    body {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
    }

    /* í˜ì´ì§€ ë‚´ìš©ì´ ì‘ì„ ë•Œ ë‚¨ëŠ” ê³µê°„ì„ footer ì•„ë˜ë¡œ ë°€ì–´ì¤Œ */
    #page-content-wrapper {
        flex: 1;
    }
</style>

</html>
